{% extends "base.html" %}

{% block title %}Gerenciar Usuários{% endblock %}

{% block content %}

<div class="admin-usuarios-container">

    <h1>Gerenciar Usuários</h1>

    <!-- ================= CRIAR USUÁRIO ================= -->
    <section class="admin-section">
        <h2>Criar novo usuário</h2>

        <form class="admin-form" method="POST" action="{{ url_for('admin_criar_usuario') }}">
            
            <label for="name">Nome</label>
            <input type="text" name="name" id="name" required>

            <label for="email">E-mail</label>
            <input type="email" name="email" id="email" required>

            <label for="password">Senha</label>
            <input type="password" name="password" id="password" required>

            <label for="role">Tipo de usuário</label>
            <select name="role" id="role">
                <option value="user">Usuário</option>
                <option value="admin">Administrador</option>
            </select>

            <button type="submit">Criar usuário</button>
        </form>
    </section>

    <!-- ================= LISTA DE USUÁRIOS ================= -->
    <section class="admin-section">
        <h2>Usuários cadastrados</h2>

        {% if usuarios %}
        <table class="admin-table">
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>E-mail</th>
                    <th>Tipo</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                {% for usuario in usuarios %}
                <tr>
                    <td>{{ usuario.name }}</td>
                    <td>{{ usuario.email }}</td>
                    <td>{{ usuario.role }}</td>
                    <td>
                        <a 
                           href="{{ url_for('admin_excluir_usuario', id=usuario.id) }}"
                           class="admin-action delete"
                           onclick="return confirm('Tem certeza que deseja excluir este usuário?')"
                        >
                            Excluir
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
            <p>Nenhum usuário cadastrado.</p>
        {% endif %}
    </section>

    <!-- ================= VOLTAR ================= -->
    <a href="{{ url_for('admin') }}" class="admin-back">← Voltar ao painel admin</a>

</div>

{% endblock %}
